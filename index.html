<!DOCTYPE html>
<html lang="en">
  <head>

    <!-- Basic Page Needs ––––––––––––––––––––––––––––––––––––––––––––––––––-->
    <meta charset="utf-8">
    <title>Pool Shot Clocker</title>
    <meta name="description" content="'Pool Shot Clock', This is a webapplication for a 30 second clock for pool tournaments">
    <meta name="author" content="Shaun Gill">

    <!-- Mobile Specific Metas ––––––––––––––––––––––––––––––––––––––––––––––––––-->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- FONT –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

    <!-- CSS ––––––––––––––––––––––––––––––––––––––––––––––––––-->
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/skeleton.css">
    <link rel="stylesheet" href="css/style.css">

    <!-- Favicon –– Circled 8 icon by Icons8, Source -> https://icons8.com/icons/set/8-circle -->
    <link rel="icon" type="image/png" href="images/favicon.png">

  </head>
  <body>
    <!--Title ––––––––––––––––––––––––––––––––––––––––––––––––––-->
    <h1>30 Second Pool Shot Clock</h1>

    <!--Timer Display ––––––––––––––––––––––––––––––––––––––––––––––––––-->
    <p id="clock_text">30</p>

    <!--Controls ––––––––––––––––––––––––––––––––––––––––––––––––––-->
    <a id="start_button" class="button" href="javascript:startTimer()">start</a>
    <a id="start_button" class="button" href="javascript:pauseTimer()">pause</a>
    <a id="restart_button" class="button" href="javascript:restartTimer()">restart</a>

    <audio id="warning_audio">
      <source src="audio/warning.mp3" type="audio/mp3">
    </audio>
    <audio id="foul_audio">
        <source src="audio/foul.mp3" type="audio/mp3">
      </audio>
  </body>
</html>
<script>

var start;
var time = 29;

function startTimer()
{
  document.getElementById("start_button").style.visibility = "hidden";
  
  start = setInterval(updateClock, 1000);
} 

function restartTimer() 
{  
  time = 29;

  clearInterval(start);

  document.getElementById("clock_text").innerText = 30;

  start = setInterval(updateClock, 1000);
}

function pauseTimer() 
{
  document.getElementById("start_button").style.visibility = "visible";

  clearInterval(start);

}
function updateClock() 
{ 
  //Change timer text
  document.getElementById("clock_text").innerText = time;
  
  //Sound effect to be played at every second under 6
  if(time < 6)
  {
    if(time == 0)
    {
      document.getElementById("foul_audio").play();
    }
    else
    {
      document.getElementById("warning_audio").play();
    }
  }
  //Decrease time
  time--;

  //Stop at 0 
  if(time == -1)
  {
    //Stop current countdown
    clearInterval(start);
    
    //Reset timer to 30 after a 1.5 second wait
    setTimeout( function() { document.getElementById("clock_text").innerText = 30  }, 1500);

  }
}
</script>