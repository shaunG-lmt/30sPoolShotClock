<!DOCTYPE html>
<html lang="en">
  <head>

    <!-- Basic Page Needs ––––––––––––––––––––––––––––––––––––––––––––––––––-->
    <meta charset="utf-8">
    <title>Pool Shot Clock</title>
    <meta name="description" content="'Pool Shot Clock', This is a webapplication for a 30 second clock for pool tournaments">
    <meta name="author" content="Shaun Gill">

    <!-- Mobile Specific Metas ––––––––––––––––––––––––––––––––––––––––––––––––––-->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- FONT –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

    <!-- CSS ––––––––––––––––––––––––––––––––––––––––––––––––––-->
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/skeleton.css">
    <link rel="stylesheet" href="css/style.css">

    <!-- Favicon –– Circled 8 icon by Icons8, Source -> https://icons8.com/icons/set/8-circle -->
    <link rel="icon" type="image/png" href="images/favicon.png">

  </head>
  <body>
    <!--Title ––––––––––––––––––––––––––––––––––––––––––––––––––-->
    <h1>30 Second Pool Shot Clock</h1>

    <!--Countdown Display ––––––––––––––––––––––––––––––––––––––––––––––––––-->
    <div class="row">
      <p id="clock_text">30<p>
    </div>

    <!--Match Length Input ––––––––––––––––––––––––––––––––––––––––––––––––––-->
    <div class="row">
      <h1 id="matchlength_text">00:00:00</h1>
    </div>
    
    <!--Controls ––––––––––––––––––––––––––––––––––––––––––––––––––-->
    <div class="row">
      <a id="start_button" class="button" href="javascript:startGame()">start</a>
      <a id="pause_button" class="button" href="javascript:pauseGame()">pause</a>
      <a id="restart_button" class="button" href="javascript:restartCountdown()">restart shotclock</a>
    </div>
    

    <!--Match Length Input ––––––––––––––––––––––––––––––––––––––––––––––––––-->
    <div class="row" id="matchlength_container">
      Match Length: <input id="matchlength_input" type="number" placeholder="Min(s)">
    </div>    

    <audio id="warning_audio">
      <source src="audio/warning.mp3" type="audio/mp3">
    </audio>
    <audio id="foul_audio">
        <source src="audio/foul.mp3" type="audio/mp3">
      </audio>
  </body>
</html> 
<script>
  var start;
  var time = 29;

  function startGame()
  {
    document.getElementById("start_button").style.visibility = "hidden";
    document.getElementById("matchlength_container").style.visibility = "hidden";
    document.getElementById("restart_button").style.visibility = "visible";
    
    start = setInterval(updateClock, 1000);
  } 
  function restartCountdown() 
  {  
    
    time = 29;

    clearInterval(start);

    document.getElementById("start_button").style.visibility = "hidden";
    document.getElementById("clock_text").innerText = 30;

    start = setInterval(updateClock, 1000);
  }
  function pauseGame() 
  {
    document.getElementById("start_button").style.visibility = "visible";

    clearInterval(start);
  }
  function updateClock() 
  { 
    //Change Countdown text
    document.getElementById("clock_text").innerText = time;
    
    //Sound effect to be played at every second under 6
    if(time < 6)
    {
      if(time == 0)
      {
        document.getElementById("foul_audio").play();
      }
      else
      {
        document.getElementById("warning_audio").play();
      }
    }
    //Decrease time
    time--;

    //Stop at 0 
    if(time == -1)
    {
      //Stop current countdown
      clearInterval(start);
      
      //Reset Countdown to 30 after a 1.5 second wait
      setTimeout( function() { document.getElementById("clock_text").innerText = 30  }, 1500);

    }
  }
</script> 